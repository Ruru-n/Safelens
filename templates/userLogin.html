<!DOCTYPE html>
<html lang="en">


<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>


   <style>
       * {
           margin: 0;
           padding: 0;
           box-sizing: border-box;
           font-family: Arial, sans-serif;
       }


       body {
           background: #f5f4ef;
           /* light cream background */
           display: flex;
           justify-content: center;
           align-items: center;
           height: 100vh;
           padding: 40px;
       }


       .container {
           width: 100%;
           max-width: 1600px;
           display: flex;
           align-items: center;
           gap: 60px;
       }


       /* LEFT CARD */
       .register-card {
           margin-left: 70px;
           background: white;
           width: 420px;
           height: 700px;
           padding: 40px;
           border-radius: 25px;
           text-align: left;
           box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
           position: relative;
           /* important! */
       }


       .logo-img {
           position: absolute;
           /* so it won't push content down */
           top: 20px;
           /* distance from top of card */
           left: 50%;
           /* center horizontally */
           transform: translateX(-50%);
           /* perfect center */
           height: 115px;
           /* adjust this for size */
           width: auto;
           /* maintain aspect ratio */
       }


       .register-card h2 {
           text-align: center;
           font-size: 26px;
           margin-top: 135px;
           /* space from logo */
           margin-bottom: 18px;
           font-weight: 600;
           color: #222;
       }


       .input-box {
           margin-bottom: 18px;
           display: flex;
           flex-direction: column;
           gap: 5px;
       }


       .input-box input {
           width: 100%;
           padding: 14px 16px;
           padding-left: 42px;
           border-radius: 8px;
           border: 1px solid black;
           font-size: 15px;
       }


       .input-box input:hover {
           border-color: #4e7bb8;
           /* change border color */
           box-shadow: 0 0 5px rgba(78, 123, 184, 0.5);
           /* optional shadow */
       }


       .input-box img.email-icon {
           position: absolute;
           left: 55px;
           top: 246px;
           transform: translateY(-50%);
           height: 20px;
           opacity: 1;
       }


       .input-box img.pass-icon {
           position: absolute;
           left: 55px;
           top: 312px;
           transform: translateY(-50%);
           height: 20px;
           opacity: 1;
       }


       .input-box img.eyes {
           position: absolute;
           left: 345px;
           top: 312px;
           transform: translateY(-50%);
           height: 20px;
           width: 20px;
           opacity: 1;
       }


       .forgot-password {
           display: block;
           /* make sure vertical margin works */
           text-align: center;
           font-size: 14px;
           margin-top: 20px;
           margin-bottom: 13px;
           /* top & bottom margin */
           color: #252525;
           cursor: pointer;
       }


       .forgot-password:hover {
           color: #4e7bb8;
           /* change to any color you want */
           text-decoration: underline;
           /* para magmukhang link */
       }


       .register-btn {
           width: 100%;
           background: #999;
           /* inactive by default */
           color: white;
           padding: 14px;
           border: none;
           font-size: 16px;
           border-radius: 8px;
           cursor: not-allowed;
           margin-top: 5px;
           margin-bottom: 20px;
           transition: background 0.3s;
       }


       .register-btn.active {
           background: #4e7bb8;
           cursor: pointer;
       }


       .register-btn.active:hover {
           background: #173f80;
       }


       .divider {
           display: flex;
           align-items: center;
           gap: 10px;
           margin: 10px 0 14px;
       }


       .divider-line {
           flex: 1;
           height: 1px;
           background: black;
           margin-top: -15px;
       }


       .divider span {
           font-size: 14px;
           color: #555;
           margin-top: -15px;
       }


       .google-btn {
           width: 100%;
           padding: 3px;
           border: 1px solid #333;
           border-radius: 8px;
           background: white;
           display: flex;
           align-items: center;
           /* vertical centering */
           justify-content: center;
           /* horizontal centering */
           gap: 10px;
           cursor: pointer;
           margin-bottom: 12px;


           text-decoration: none;
           /* ✅ alisin underline */
           color: black;
       }


       .apple-btn {
           width: 100%;
           padding: 0px;
           border: 1px solid #333;
           border-radius: 8px;
           background: white;
           display: flex;
           align-items: center;
           /* vertical centering */
           justify-content: center;
           /* horizontal centering */
           gap: 10px;
           cursor: pointer;
           margin-bottom: 12px;


           text-decoration: none;
           /* ✅ alisin underline */
           color: black;
       }


       .google-btn img {
           margin-left: -1px;
           margin-right: 10px;
           height: 40px;
           width: 40px;
           padding: 0px;
       }


       .apple-btn img {
           margin-left: -10px;
           height: 40px;
           width: 40px;
           margin-bottom: 5px;
       }


       .google-text {
           font-size: 14px;
           color: #000;
           /* or whatever color you like */
           font-weight: 500;
           margin-left: -20px;
       }


       .apple-text {
           font-size: 14px;
           color: #000;
           font-weight: 500;
           margin-left: -10px;
       }




       .bottom-text {
           margin-top: 60px;
           text-align: center;
           font-size: 14px;
       }


       .bottom-text a {
           color: #1a4d8f;
           text-decoration: none;
       }


       .bottom-text a:hover {
           text-decoration: underline;
       }


       /* RIGHT SIDE IMAGE */
       .userIllustration {
           display: flex;
           justify-content: center;
           align-items: center;
       }


       .userIllustration img {
           width: 850px;
           margin-left: -48px;
           /* adjust size here */
           height: auto;
       }


       /* MODAL BACKDROP */
       .modal {
           display: none;
           /* hide by default */
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background: rgba(0, 0, 0, 0.5);
           justify-content: center;
           /* REMOVE second display */
           align-items: center;
       }


       /* MODAL BOX */
       .modal-content {
           background: white;
           padding: 25px;
           width: 360px;
           border-radius: 12px;
           text-align: center;
           box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
       }


       .modal-content h3 {
           margin-bottom: 10px;
       }


       .modal-content input {
           width: 100%;
           padding: 12px;
           margin: 12px 0;
           font-size: 15px;
           border-radius: 6px;
           border: 1px solid #888;
       }


       .send-btn {
           width: 100%;
           padding: 12px;
           background: #4e7bb8;
           border: none;
           color: white;
           border-radius: 8px;
           cursor: pointer;
           margin-bottom: 10px;
       }


       .close-btn {
           width: 100%;
           padding: 10px;
           background: #ccc;
           border: none;
           border-radius: 8px;
           cursor: pointer;
       }


       .flash.error {
           color: red;
       }


       /* FLASH CARD BASE */
       .flash-card {
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%) scale(0.9);
           background: white;
           padding: 30px 40px;
           border-radius: 18px;
           text-align: center;
           box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
           z-index: 9999;
           opacity: 0;
           pointer-events: none;
           transition: all 0.4s ease;
           min-width: 320px;
       }


       /* SHOW CARD */
       .flash-card.show {
           opacity: 1;
           transform: translate(-50%, -50%) scale(1);
           pointer-events: all;
       }


       /* MESSAGE TEXT */
       .flash-message {
           font-size: 18px;
           margin-bottom: 20px;
           color: #333;
       }


       /* ===================== */
       /* SUCCESS (GREEN) */
       /* ===================== */
       .flash-success {
           border: 3px solid #2ecc71;
       }


       .flash-success .icon {
           font-size: 50px;
           color: #2ecc71;
           margin-bottom: 15px;
       }


       .flash-success button {
           background: #2ecc71;
           color: white;
       }


       /* ===================== */
       /* ERROR (RED) */
       /* ===================== */
       .flash-error {
           border: 3px solid #e74c3c;
       }


       .flash-error button {
           background: #e74c3c;
           color: white;
       }


       /* OK BUTTON */
       .flash-card button {
           border: none;
           padding: 12px 26px;
           border-radius: 10px;
           cursor: pointer;
           font-size: 16px;
           font-weight: bold;
       }


       .flash-card button:hover {
           opacity: 0.9;
       }
   </style>
</head>
<!-- {% with messages = get_flashed_messages(category_filter=["email_error"]) %}
{% if messages %}
<div class="flash error">{{ messages[0] }}</div>
{% endif %}
{% endwith %}


{% with messages = get_flashed_messages(category_filter=["password_error"]) %}
{% if messages %}
<div class="flash error">{{ messages[0] }}</div>
{% endif %}
{% endwith %} -->


<body>
   <div class="container">
       <div class="register-card">
           <img class="logo-img" src="{{url_for('static', filename = 'offLogo.png')}}" class="offLogo" alt="offLogo">


           <h2>Please log in</h2>


           <form method="POST" action="{{ url_for('userLogin') }}">


               <div class="input-box">
                   <img src="{{ url_for('static', filename='sms.png') }}" class="email-icon" alt="email icon">
                   <input type="email" name="email" id="email" placeholder="Email" required>
               </div>


               <div class="input-box">
                   <img src="{{ url_for('static', filename='security-safe.png') }}" class="pass-icon"
                       alt="password icon">
                   <img src="{{url_for('static', filename='eye-slash.png')}}" id="togglePassword" class="eyes"
                       alt="togglePassword">
                   <input type="password" name="password" id="password" placeholder="Set your password" required>


               </div>


               <div class="forgot-password">Forgot Password?</div>


               <button type="submit" id="registerBtn" class="register-btn" disabled>
                   Login
               </button>
           </form>


           <div class="divider">
               <div class="divider-line"></div>
               <span>or</span>
               <div class="divider-line"></div>
           </div>


           <!-- Google Login -->
           <a href="{{ url_for('login_google') }}" class="google-btn">
               <img src="{{ url_for('static', filename='google.png') }}" alt="google">
               <span class="google-text">Continue with Google</span>
           </a>


           <!-- Apple Login (inactive) -->
           <a href="#" class="apple-btn" onclick="alert('Apple login not implemented yet')">
               <img src="{{ url_for('static', filename='apple.png') }}" alt="apple">
               <span class="apple-text">Continue with Apple</span>
           </a>


           </a>




           <div class="bottom-text">
               Don't have an account?
               <a id="sign-in" href="{{ url_for('userSignIn') }}">Sign In</a>
           </div>
       </div>


       <div class="userIllustration">
           <img src="{{url_for('static', filename = 'userIllustration.png')}}" alt="userIllustration">
       </div>
   </div>


   <!-- FORGOT PASSWORD MODAL -->
   <div id="forgotModal" class="modal">
       <div class="modal-content">
           <h3>Reset Password</h3>
           <p>Enter your email to reset your password</p>


           <input type="email" id="forgotEmail" placeholder="Enter your email">


           <button class="send-btn" id="sendResetBtn">Send Reset Link</button>


           <button class="close-btn" id="closeModal">Close</button>
       </div>
   </div>


   <script>


       // === TOGGLE PASSWORD ===
       const togglePassword = document.getElementById('togglePassword');
       const password = document.querySelector('input[type="password"]');


       togglePassword.addEventListener('click', function () {
           const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
           password.setAttribute('type', type);


           if (type === 'text') {
               togglePassword.src = "{{ url_for('static', filename='eye-open.png') }}";
           } else {
               togglePassword.src = "{{ url_for('static', filename='eye-slash.png') }}";
           }
       });


       // === FORGOT PASSWORD MODAL ===
       const forgotBtn = document.querySelector('.forgot-password');
       const modal = document.getElementById('forgotModal');
       const closeModal = document.getElementById('closeModal');


       forgotBtn.addEventListener('click', () => {
           modal.style.display = "flex";
       });


       closeModal.addEventListener('click', () => {
           modal.style.display = "none";
       });


       window.addEventListener('click', (e) => {
           if (e.target === modal) {
               modal.style.display = "none";
           }
       });


       //reset password chuchu forgot password
       const sendBtn = document.querySelector('.send-btn');


       sendBtn.addEventListener('click', () => {
           const email = document.getElementById('forgotEmail').value;


           if (!email) {
               alert('Please enter your email');
               return;
           }


           fetch('/forgot-password', {
               method: 'POST',
               headers: {
                   'Content-Type': 'application/json'
               },
               body: JSON.stringify({ email: email })
           })
               .then(res => res.json())
               .then(data => {
                   alert(data.message); // temporary feedback
               })
               .catch(err => {
                   alert('Something went wrong');
               });
       });




       //iilaw login button
       const emailInput = document.getElementById('email');
       const passwordInput = document.getElementById('password');
       const registerBtn = document.getElementById('registerBtn');


       function toggleButton() {
           if (emailInput.value.trim() !== '' && passwordInput.value.trim() !== '') {
               registerBtn.disabled = false;
               registerBtn.classList.add('active');
           } else {
               registerBtn.disabled = true;
               registerBtn.classList.remove('active');
           }
       }


       // === SHOW FLASH MESSAGES AS POPUP ===
       window.addEventListener('DOMContentLoaded', (event) => {
           const emailMsg = "{{ get_flashed_messages(category_filter=['email_error'])|join(', ') }}";
           const passwordMsg = "{{ get_flashed_messages(category_filter=['password_error'])|join(', ') }}";


           if (emailMsg) {
               document.getElementById('flashEmailMsg').innerText = emailMsg;
               document.getElementById('flashEmail').classList.add('show');
           }


           if (passwordMsg) {
               document.getElementById('flashPasswordMsg').innerText = passwordMsg;
               document.getElementById('flashPassword').classList.add('show');
           }
       });


       // Close flash popup function
       function closeFlash(flashId) {
           document.getElementById(flashId).classList.remove('show');
       }


       emailInput.addEventListener('input', toggleButton);
       passwordInput.addEventListener('input', toggleButton);


   </script>


   <!-- FLASH MESSAGES POP-UP -->
   <div id="flashEmail" class="flash-card flash-error">
       <div class="flash-message" id="flashEmailMsg"></div>
       <button onclick="closeFlash('flashEmail')">OK</button>
   </div>


   <div id="flashPassword" class="flash-card flash-error">
       <div class="flash-message" id="flashPasswordMsg"></div>
       <button onclick="closeFlash('flashPassword')">OK</button>
   </div>




</body>


</html>
